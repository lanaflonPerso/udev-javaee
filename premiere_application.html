
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Une première application &#8212; documentation Java EE 1.0</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="Introduction à Maven" href="maven.html" />
    <link rel="prev" title="L’environnement de développement" href="environnement_developpement.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="une-premiere-application">
<h1>Une première application<a class="headerlink" href="#une-premiere-application" title="Lien permanent vers ce titre">¶</a></h1>
<p>L’objectif de ce chapitre est de développer une première application
Web Java EE sous la forme d’un site avec une page HTML.</p>
<div class="section" id="qu-est-ce-qu-une-application-java-ee">
<h2>Qu’est-ce qu’une application Java EE ?<a class="headerlink" href="#qu-est-ce-qu-une-application-java-ee" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une application Web Java contient trois types de contenu :</p>
<ul class="simple">
<li><strong>Les fichiers publics</strong> : images, pages HTML, fichiers JavaScript.
Il s’agit des fichiers qui sont téléchargés tels quels sur le
navigateur client.</li>
<li><strong>Les ressources dynamiques</strong> : il s’agit du code Java (mais pas
uniquement) qui est exécuté par le serveur en vue de produire un
contenu à renvoyer au client.</li>
<li><strong>Les fichiers privés</strong> : il s’agit la plupart du temps de fichiers
de configuration qui sont exploités par le serveur ou les ressources
dynamiques et que l’on ne souhaite pas rendre directement accessibles
sur le Web</li>
</ul>
<p>Une application Web Java n’est pas directement exécutable, elle doit
être <strong>déployée</strong> dans un serveur d’application. Le serveur va prendre
en charge la réception des requêtes clientes et exécuter le code de
l’application en conséquence.</p>
</div>
<div class="section" id="creation-d-un-projet-dans-eclipse">
<h2>Création d’un projet dans Eclipse<a class="headerlink" href="#creation-d-un-projet-dans-eclipse" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans Eclipse, sélectionnez <span class="guilabel">File &gt; New &gt; Dynamic Web Project</span>.</p>
<p><img alt="Création d'une application Web dynamique dans Eclipse 1" src="_images/eclipse_new_dynamic_web_project1.png" /></p>
<p>Saisissez le nom du projet et <strong>vérifiez que le champ Target Runtime
est bien positionné sur le serveur que vous avez créé</strong>. Cela indique à
Eclipse que votre application Web dépend des bibliothèques Java fournies
par Wildfly.</p>
<p>Cliquez sur <span class="guilabel">Next</span>.</p>
<p><img alt="Création d'une application Web dynamique dans Eclipse 2" src="_images/eclipse_new_dynamic_web_project2.png" /></p>
<p>Eclipse vous propose les répertoires de votre projet qui contiendront
les sources Java. Nous n’en aurons pas besoin pour l’instant. Laissez
les valeurs par défaut et cliquez sur «&nbsp;Next&nbsp;».</p>
<p><img alt="Création d'une application Web dynamique dans Eclipse 3" src="_images/eclipse_new_dynamic_web_project3.png" /></p>
<p>Pour la dernière étape, cliquez sur la case <span class="guilabel">Generate web.xml
deployment descriptor</span> puis cliquez sur <span class="guilabel">Finish</span>.</p>
</div>
<div class="section" id="deploiement-depuis-eclipse-et-test-de-l-application">
<h2>Déploiement depuis Eclipse et test de l’application<a class="headerlink" href="#deploiement-depuis-eclipse-et-test-de-l-application" title="Lien permanent vers ce titre">¶</a></h2>
<p>Vous disposez maintenant d’un projet dans Eclipse. Ce projet contient un
répertoire <code class="file docutils literal"><span class="pre">WebContent</span></code> : il s’agit du répertoire racine pour le
contenu des fichiers statiques de l’application.</p>
<p>Ajoutez un fichier HTML dans le répertoire <code class="file docutils literal"><span class="pre">WebContent</span></code> (clic droit
sur le répertoire puis <span class="guilabel">New &gt; HTML file</span>).</p>
<p>Vous pouvez par exemple créer le fichier <code class="file docutils literal"><span class="pre">hello.html</span></code> avec le contenu
suivant :</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Hello Java EE<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hello Java EE<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Il ne vous reste plus qu’à déployer votre application dans Wildfly. Pour
cela, faites un clic droit sur le nom de votre serveur dans la vue
<em>Servers</em> et choisissez le menu <span class="guilabel">Add and Remove…</span>. Vous allez
pouvoir choisir les applications que vous souhaitez ajouter ou supprimer
de votre serveur.</p>
<p><img alt="Ajout d'une application Web dans Wildfly" src="_images/eclipse_add_into_server.png" /></p>
<p>Si cela, n’est pas déjà fait, il vous reste encore à démarrer votre
serveur.</p>
<p>Votre application est maintenant déployée et vous pouvez accéder au
fichier depuis votre navigateur Web à l’adresse :
<a class="reference external" href="http://localhost:8080/monappli/hello.html">http://localhost:8080/monappli/hello.html</a></p>
<div class="section" id="le-contexte-racine-de-deploiement-root-context">
<h3>Le contexte racine de déploiement (root context)<a class="headerlink" href="#le-contexte-racine-de-deploiement-root-context" title="Lien permanent vers ce titre">¶</a></h3>
<p>Un serveur d’application peut abriter plusieurs applications. Au moment
du déploiement, on indique au serveur le <strong>contexte racine de
déploiement</strong> de l’application. Il s’agit du chemin dans l’URL à partir
duquel le serveur identifie l’application à laquelle un client souhaite
accéder.</p>
<p>Lorsque vous développez sous Eclipse, le contexte racine par défaut est
tout simplement le nom du projet. Ainsi dans votre serveur de test,
l’URL de base à partir de laquelle vous accédez à votre application est
: <strong>http://localhost:8080/[nom du projet]</strong></p>
</div>
</div>
<div class="section" id="packaging-de-l-application">
<h2>Packaging de l’application<a class="headerlink" href="#packaging-de-l-application" title="Lien permanent vers ce titre">¶</a></h2>
<p>Imaginons que votre application est maintenant terminée et que vous
souhaitez la distribuer ou la livrer pour une mise en production.</p>
<p>Une application Web Java EE possède un format de distribution
particulier : le format <strong>WAR</strong> (pour Web ARchive).</p>
<p>Vous allez maintenant générer un fichier WAR à partir d’Eclipse. Pour
cela, faites un clic droit sur votre projet puis <span class="guilabel">Export &gt; WAR file</span>.
Sélectionnez une destination pour la sauvegarde du fichier et cliquez
sur <span class="guilabel">Finish</span>.</p>
<p><strong>Félicitation, vous venez de développer et de créer un format livrable
pour votre première application Java EE !</strong></p>
<p>Regardons maintenant plus en détail ce que contient ce fichier WAR. Un
fichier WAR est en fait une archive ZIP. Il est donc très facile de
regarder son contenu :</p>
<p><img alt="Contenu du fichier WAR de l'application Web" src="_images/war_content.png" /></p>
<p>Nous retrouvons le fichier hello.html qui a été ajouté à l’application.
Mais nous découvrons surtout l’arborescence standardisée d’un fichier
WAR :</p>
<dl class="docutils">
<dt>META-INF</dt>
<dd>Ce répertoire contient les meta-informations décrivant le livrable.
Il contient en général au moins le fichier MANIFEST.MF qui donne des
informations générales : nom du package, auteur, date de création…
Ce répertoire est optionnel.</dd>
<dt>WEB-INF</dt>
<dd>Ce répertoire correspond à la section privée de l’application. Il
contient le code de l’application ainsi que les fichiers de
configuration. <strong>Le contenu de ce répertoire n’est pas accessible
depuis l’extérieur</strong>. Faites le test en tentant de visualiser le
fichier web.xml à l’adresse
<a class="reference external" href="http://localhost:8080/monappli/WEB-INF/web.xml">http://localhost:8080/monappli/WEB-INF/web.xml</a>. Vous obtenez un code
erreur 404 (NOT FOUND). Le fichier est bien présent mais le serveur
refuse de répondre à cette adresse !</dd>
<dt>WEB-INF/web.xml</dt>
<dd><strong>LE fichier de déploiement</strong> de l’application Web ! Il fournit des
informations au serveur d’application au moment du démarrage de
l’application. L’application que nous avons développé était
tellement simple que nous n’avons pas eu à nous en préoccuper pour
l’instant.</dd>
<dt>WEB-INF/classes</dt>
<dd>Ce répertoire accueille les fichiers Java compilés (les fichiers
.class). Comme nous n’avons pas écrit de code pour notre
application, ce répertoire est vide.</dd>
<dt>WEB-INF/lib</dt>
<dd>Ce répertoire accueille les bibliothèques Java (les fichiers .jar)
externes qui sont nécessaires à l’application. Nous verrons que le
serveur d’application fournit déjà de nombreuses bibliothèques qu’il
ne faut <strong>SURTOUT</strong> pas incorporer au livrable. Pour toutes les
autres, c’est dans ce répertoire qu’elles doivent être placées.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>web.xml obligatoire ou pas ?</p>
<p class="last">Depuis Java EE 6, le fichier de déploiement web.xml n’est plus
obligatoire. Cependant, certains outils de développement considèrent
encore l’absence de ce fichier comme une erreur. Il est donc préférable
de toujours l’ajouter. Voilà pourquoi, il vous a été demandé de cocher
la case «&nbsp;Generate web.xml deployment descriptor&nbsp;» au moment de la
création du projet.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Java EE</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="environnement_developpement.html">L’environnement de développement</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Une première application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#qu-est-ce-qu-une-application-java-ee">Qu’est-ce qu’une application Java EE ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creation-d-un-projet-dans-eclipse">Création d’un projet dans Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploiement-depuis-eclipse-et-test-de-l-application">Déploiement depuis Eclipse et test de l’application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packaging-de-l-application">Packaging de l’application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="maven.html">Introduction à Maven</a></li>
<li class="toctree-l1"><a class="reference internal" href="servlet.html">Les Servlets</a></li>
<li class="toctree-l1"><a class="reference internal" href="conteneur_web.html">Le conteneur Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="attributs_web.html">Les attributs d’une application Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="jsp.html">JSP : Java Server Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="request_dispatcher.html">RequestDispatcher et MVC</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_listeners_filters.html">Web listeners et filtres</a></li>
<li class="toctree-l1"><a class="reference internal" href="orm/jdbc_webapp.html">JDBC dans une application Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="orm/ejb.html">Les EJB</a></li>
<li class="toctree-l1"><a class="reference internal" href="jsf.html">Java Server Faces (JSF)</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/api/index.html?overview-summary.html">API Java</a></li>
    
    <li class="toctree-l1"><a href="https://docs.oracle.com/javaee/7/api/">API Java EE</a></li>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/">Documentation Java</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;
<a ref="author" href="mailto:dagaydevel@free.fr">David Gayerie</a>
<a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/fr/80x15.png" /></a>
.
      
    </div>

    

    
  </body>
</html>